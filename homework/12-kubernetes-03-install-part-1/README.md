# Домашняя работа к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"

Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру

Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* база данных должна быть отказоустойчивой (не менее трех копий, master-slave) и потребляет около 4 ГБ ОЗУ в работе;
* кэш должен быть аналогично отказоустойчивый, более трех копий, потребление: 4 ГБ ОЗУ, 1 ядро;
* фронтенд обрабатывает внешние запросы быстро, отдавая статику: не более 50 МБ ОЗУ на каждый экземпляр;
* бекенду требуется больше: порядка 600 МБ ОЗУ и по 1 ядру на копию.

Требования: опишите, сколько нод в кластере и сколько ресурсов (ядра, ОЗУ, диск) нужно для запуска приложения. Расчет вести из необходимости запуска 5 копий фронтенда и 10 копий бекенда, база и кеш.  

**ОТВЕТ:**  Размер HDD необходимый базе, кешу, фронту и беку не обозначен, поэтому примем, что им необходимо по 100 Gb на ноде.
Начальные данные:

| Назначение | Количество | Ресурсы | Примечание |
|------------|:----------:|---------|------------|
| База | 3 | 4 Gb RAM, 1 CPU, 100 Gb SSD | каждая копия на своей ноде + быстрый диск |
| Кеш | 3 | 4 Gb RAM, 1 CPU, 100 Gb SSD | каждая копия на своей ноде + быстрый диск|
| Фронтенд | 5 | 50 Mb RAM, 0.1 CPU, 100 Gb HDD | совместим фронт с беком |
| Бекенд | 10 | 600 Mb RAM, 1 CPU, 100 Gb HDD | совместим фронт с беком |

Прибавим Control Plane, требования для работы самих нод и распределим по нодам:
| Назначение ноды | Количество нод | Ресурсы на 1 ноду| Примечание |
|-----------------|:--------------:|---------|------------|
| Control Plane | 1 | 2 Gb RAM, 2 CPU, 50 Gb HDD | кластер небольшой, 1 СР хватит |
| База | 3 | 5 Gb RAM, 2 CPU, 100 Gb HDD, 100 Gb SSD | каждая копия на своей ноде |
| Кеш | 3 | 5 Gb RAM, 2 CPU, 100 Gb HDD, 100 Gb SSD | каждая копия на своей ноде |
| 1 Фронтенд + 2 Бекенда | 5 | 3 Gb RAM, 4 CPU, 500 Gb HDD | совместим фронт с беком. 5 нод гарантируют отказоустойчивость, а небольшой запас по RAM, CPU  и HDD позволят мигрировать поды с упавших нод практически без потери производительности|

Итого получается что для работы кластера нужно: **12 нод**, которые будут потреблять **47 Gb RAM, 34 CPU, 3.15 Tb HDD, 600 Gb SSD**

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
